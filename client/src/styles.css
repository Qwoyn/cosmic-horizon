/* === COSMIC HORIZON - Retro Terminal with Modern Touches === */

@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;700&display=swap');

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Hide number input spinners globally */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
input[type="number"] {
  -moz-appearance: textfield;
  appearance: textfield;
}

:root {
  --bg-primary: #0a0e14;
  --bg-secondary: #0d1117;
  --bg-tertiary: #161b22;
  --border: #3a2040;
  --border-bright: #c23a87;
  --text-primary: #c9d1d9;
  --text-secondary: #8b949e;
  --text-muted: #30363d;
  --green: #3fb950;
  --green-dim: #1a3a2a;
  --magenta: #e847a0;
  --magenta-dim: #2a1a2a;
  --blue: #58a6ff;
  --red: #f85149;
  --yellow: #d29922;
  --orange: #f0883e;
  --purple: #a371f7;
  --cyan: #56d4dd;
}

html { font-size: clamp(12px, 0.9vw, 20px); }

body {
  font-family: 'IBM Plex Mono', 'Consolas', monospace;
  background: var(--bg-primary);
  color: var(--text-primary);
  overflow: hidden;
  height: 100vh;
}

#root {
  height: 100vh;
}

/* === Auth Pages === */
.auth-page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(ellipse at center, #0d1117 0%, #0a0e14 70%);
  overflow-y: auto;
  padding: 20px 0;
}

.auth-container {
  width: 360px;
  padding: 32px;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: var(--bg-secondary);
}

.auth-logo {
  display: block;
  margin: 0 auto 8px;
  width: 180px;
  height: auto;
}

.auth-title {
  text-align: center;
  color: var(--magenta);
  font-size: 1.846rem;
  font-weight: 700;
  letter-spacing: 4px;
  margin-bottom: 4px;
}

.auth-subtitle {
  text-align: center;
  color: var(--text-secondary);
  font-size: 0.923rem;
  margin-bottom: 24px;
}

.auth-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.auth-field {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.auth-field label {
  font-size: 0.923rem;
  color: var(--text-secondary);
  text-transform: uppercase;
}

.auth-field input {
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 8px 12px;
  color: var(--text-primary);
  font-family: inherit;
  font-size: 1.077rem;
  outline: none;
  transition: border-color 0.2s;
}

.auth-field input:focus {
  border-color: var(--magenta);
}

.auth-error {
  color: var(--red);
  font-size: 1rem;
  padding: 8px;
  background: rgba(248, 81, 73, 0.1);
  border-radius: 4px;
  border: 1px solid rgba(248, 81, 73, 0.3);
}

.auth-link {
  text-align: center;
  margin-top: 16px;
  font-size: 1rem;
  color: var(--text-secondary);
}

.auth-link a {
  color: var(--blue);
  text-decoration: none;
}

.auth-link a:hover {
  text-decoration: underline;
}

/* === Buttons === */
.btn {
  padding: 8px 16px;
  border: 1px solid var(--border);
  border-radius: 4px;
  background: var(--bg-tertiary);
  color: var(--text-primary);
  font-family: inherit;
  font-size: 1.077rem;
  cursor: pointer;
  transition: all 0.2s;
}

.btn:hover {
  background: var(--border);
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-primary {
  background: var(--magenta-dim);
  border-color: var(--magenta);
  color: var(--magenta);
}

.btn-primary:hover {
  background: var(--border-bright);
  color: white;
}

.btn-fire {
  border-color: var(--orange);
  color: var(--orange);
}

.btn-fire:hover {
  background: rgba(240, 136, 62, 0.2);
}

.btn-flee {
  border-color: var(--yellow);
  color: var(--yellow);
}

.btn-flee:hover {
  background: rgba(210, 153, 34, 0.2);
}

.btn-sm {
  padding: 2px 8px;
  font-size: 0.923rem;
  border: 1px solid var(--border);
  border-radius: 3px;
  background: var(--bg-tertiary);
  color: var(--text-primary);
  cursor: pointer;
  font-family: inherit;
}

.btn-buy { border-color: var(--green); color: var(--green); }
.btn-sell { border-color: var(--purple); color: var(--purple); }

/* === Game Layout === */
.game-layout {
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: linear-gradient(135deg, #0a0e14 0%, #0a1020 25%, #0a0e14 50%, #0d0a18 75%, #0a0e14 100%);
  background-size: 400% 400%;
  animation: ambient-gradient-shift 25s ease infinite;
}

@keyframes ambient-gradient-shift {
  0% { background-position: 0% 50%; }
  25% { background-position: 100% 0%; }
  50% { background-position: 100% 100%; }
  75% { background-position: 0% 100%; }
  100% { background-position: 0% 50%; }
}

/* Three-column layout: activity-bar | center | context-panel */
.game-main {
  flex: 1;
  display: flex;
  overflow: hidden;
}

/* Center column: terminal (top) + panel area (bottom) */
.game-center {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
  overflow: hidden;
  position: relative;
}

/* Map area — full width, fills top of center column */
.game-map-area {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  min-height: 0;
  border-bottom: 1px solid var(--border);
}

.game-panel-area {
  flex: 1;
  display: flex;
  flex-direction: row;
  overflow: hidden;
  background:
    /* Nebula glow */
    radial-gradient(ellipse at 20% 30%, rgba(232, 71, 160, 0.04) 0%, transparent 60%),
    radial-gradient(ellipse at 80% 70%, rgba(86, 212, 221, 0.03) 0%, transparent 60%),
    /* Star dots */
    radial-gradient(1px 1px at 50px 20px, rgba(255,255,255,0.3), transparent),
    radial-gradient(1px 1px at 150px 60px, rgba(255,255,255,0.2), transparent),
    radial-gradient(1px 1px at 250px 40px, rgba(255,255,255,0.35), transparent),
    radial-gradient(1px 1px at 100px 90px, rgba(255,255,255,0.25), transparent),
    radial-gradient(1px 1px at 300px 30px, rgba(255,255,255,0.3), transparent),
    radial-gradient(1px 1px at 200px 80px, rgba(255,255,255,0.2), transparent),
    /* Dark gradient base */
    linear-gradient(135deg, #0d1015, var(--bg-tertiary), #0d1117);
}

.scene-viewport {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #0a0e14;
  border-left: none;
  box-shadow: inset 1px 0 6px rgba(86, 212, 221, 0.08);
  overflow: hidden;
  min-width: 0;
  position: relative;
}

.scene-viewport::after {
  content: '';
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    to bottom,
    transparent 0px,
    transparent 2px,
    rgba(0, 0, 0, 0.06) 2px,
    rgba(0, 0, 0, 0.06) 4px
  );
  pointer-events: none;
  z-index: 1;
}

.scene-viewport--empty {
  background: #0a0e14;
}

.scene-viewport .pixel-scene--inline {
  width: 100%;
  height: 100%;
  margin: 0;
  border: none;
  border-radius: 0;
  position: relative;
  z-index: 1;
}

/* === Viewport Space Background === */
.viewport-space-bg {
  position: absolute;
  inset: 0;
  z-index: 0;
  background:
    /* Star dots — soft round with falloff */
    radial-gradient(3px 3px at 15% 20%, rgba(255,255,255,0.5) 0%, transparent 100%),
    radial-gradient(2px 2px at 45% 70%, rgba(255,255,255,0.4) 0%, transparent 100%),
    radial-gradient(3px 3px at 75% 30%, rgba(255,255,255,0.45) 0%, transparent 100%),
    radial-gradient(2px 2px at 25% 80%, rgba(255,255,255,0.35) 0%, transparent 100%),
    radial-gradient(2px 2px at 85% 50%, rgba(255,255,255,0.4) 0%, transparent 100%),
    radial-gradient(3px 3px at 55% 15%, rgba(255,255,255,0.4) 0%, transparent 100%),
    radial-gradient(2px 2px at 10% 60%, rgba(255,255,255,0.45) 0%, transparent 100%),
    radial-gradient(2px 2px at 90% 85%, rgba(255,255,255,0.35) 0%, transparent 100%),
    radial-gradient(2px 2px at 35% 45%, rgba(255,255,255,0.3) 0%, transparent 100%),
    radial-gradient(2px 2px at 65% 90%, rgba(255,255,255,0.35) 0%, transparent 100%),
    radial-gradient(3px 3px at 80% 15%, rgba(255,255,255,0.4) 0%, transparent 100%),
    radial-gradient(2px 2px at 5% 40%, rgba(255,255,255,0.3) 0%, transparent 100%),
    /* Dark base */
    linear-gradient(160deg, #080a0f, #0d1117, #0a0d12);
  animation: viewport-twinkle 8s ease-in-out infinite alternate;
}

@keyframes viewport-twinkle {
  0%   { opacity: 1; }
  100% { opacity: 0.85; }
}

.game-panel-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-width: 0;
  border-left: 2px solid rgba(232, 71, 160, 0.15);
}

/* === Viewport HUD Overlay === */
.viewport-hud {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 2;
}

.viewport-hud__tl,
.viewport-hud__tr,
.viewport-hud__bl {
  position: absolute;
  font-family: 'IBM Plex Mono', monospace;
  font-size: 0.615rem;
  letter-spacing: 1px;
  text-transform: uppercase;
  opacity: 0.5;
  padding: 4px 6px;
}

.viewport-hud__tl { top: 0; left: 0; color: var(--cyan); }
.viewport-hud__tr { top: 0; right: 0; color: var(--text-secondary); }
.viewport-hud__bl { bottom: 0; left: 0; color: var(--magenta); font-size: 0.538rem; }

/* === Viewport Vignette === */
.viewport-vignette {
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center, transparent 40%, rgba(0, 0, 0, 0.5) 100%);
  pointer-events: none;
  z-index: 1;
}

/* === Viewport Transition Flash === */
.viewport-flash {
  position: absolute;
  inset: 0;
  background: white;
  z-index: 3;
  animation: viewport-flash-anim 250ms ease-out forwards;
  pointer-events: none;
}

@keyframes viewport-flash-anim {
  from { opacity: 0.6; }
  to { opacity: 0; }
}

.panel-area-header {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.846rem;
  text-transform: uppercase;
  color: var(--text-secondary);
  padding: 4px 12px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(90deg, rgba(232, 71, 160, 0.08), var(--bg-secondary) 40%, var(--bg-secondary));
  letter-spacing: 1px;
  box-shadow: 0 1px 4px rgba(232, 71, 160, 0.1);
}

.panel-content {
  padding: 8px 12px;
  overflow-y: auto;
  flex: 1;
}

/* === Activity Bar === */
.activity-bar {
  width: 44px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 8px 0;
  background:
    /* Nebula glow */
    radial-gradient(ellipse at 50% 20%, rgba(232, 71, 160, 0.06) 0%, transparent 60%),
    radial-gradient(ellipse at 50% 80%, rgba(86, 212, 221, 0.04) 0%, transparent 60%),
    /* Star field */
    radial-gradient(1px 1px at 10px 15px, rgba(255,255,255,0.4), transparent),
    radial-gradient(1px 1px at 30px 45px, rgba(255,255,255,0.3), transparent),
    radial-gradient(1px 1px at 20px 80px, rgba(255,255,255,0.5), transparent),
    radial-gradient(1px 1px at 35px 120px, rgba(255,255,255,0.2), transparent),
    radial-gradient(1px 1px at 8px 160px, rgba(255,255,255,0.35), transparent),
    radial-gradient(1px 1px at 28px 200px, rgba(255,255,255,0.4), transparent),
    radial-gradient(1px 1px at 15px 250px, rgba(255,255,255,0.25), transparent),
    radial-gradient(1px 1px at 38px 300px, rgba(255,255,255,0.45), transparent),
    radial-gradient(1px 1px at 5px 350px, rgba(255,255,255,0.3), transparent),
    radial-gradient(1px 1px at 22px 400px, rgba(255,255,255,0.35), transparent),
    radial-gradient(1px 1px at 40px 450px, rgba(255,255,255,0.2), transparent),
    radial-gradient(1px 1px at 12px 500px, rgba(255,255,255,0.4), transparent),
    /* Dark gradient base */
    linear-gradient(to bottom, #1a1f28, var(--bg-tertiary), #0d1015);
  border-right: 1px solid var(--border);
  flex-shrink: 0;
}

.activity-bar__btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  border-radius: 4px;
  cursor: pointer;
  position: relative;
  opacity: 0.5;
  transition: opacity 0.15s, background 0.15s, box-shadow 0.15s;
}

.activity-bar__btn:hover { opacity: 0.8; background: var(--bg-secondary); }
.activity-bar__btn:not(.activity-bar__btn--active) { animation: activity-btn-pulse 3s ease-in-out infinite; }
.activity-bar__btn--active {
  opacity: 1;
  background: var(--bg-secondary);
  border-left: 2px solid var(--magenta);
  box-shadow: 0 0 8px rgba(232, 71, 160, 0.3), inset 0 0 6px rgba(232, 71, 160, 0.1);
  animation: activity-btn-select 0.25s ease-out;
}

/* Icon colorization */
.activity-bar__btn:not(.activity-bar__btn--active) .pixel-sprite {
  filter: grayscale(0.6) brightness(0.8);
  transition: filter 0.2s;
}
.activity-bar__btn:hover .pixel-sprite {
  filter: grayscale(0) brightness(1.1);
}
.activity-bar__btn--active .pixel-sprite {
  filter: brightness(1.15);
}

/* Custom tooltip — fixed positioning to bypass overflow clipping */
.activity-bar__tooltip {
  position: fixed;
  transform: translateY(-50%);
  background: rgba(8, 12, 20, 0.92);
  border: 1px solid rgba(232, 71, 160, 0.3);
  color: var(--text-primary);
  padding: 3px 8px;
  font-size: 0.692rem;
  border-radius: 3px;
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s;
  z-index: 1000;
  letter-spacing: 0.5px;
  font-family: 'IBM Plex Mono', monospace;
}
.activity-bar__tooltip--visible { opacity: 1; }

/* Separator */
.activity-bar__sep {
  width: 24px;
  height: 1px;
  background: var(--border);
  margin: 2px 0;
  opacity: 0.5;
}
.activity-bar__sep--primary {
  margin: 6px 0;
  background: var(--magenta);
  opacity: 0.3;
}

/* Selection micro-animation */
@keyframes activity-btn-select {
  0% { transform: scale(1); }
  40% { transform: scale(1.15); }
  100% { transform: scale(1); }
}

.activity-bar__badge {
  position: absolute;
  top: 2px;
  right: 2px;
  background: var(--cyan, #56d4dd);
  color: var(--bg-primary);
  font-size: 0.692rem;
  min-width: 14px;
  height: 14px;
  border-radius: 7px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  animation: badge-pulse 2s ease-in-out infinite;
}

/* === Context Panel (Info Sidebar) === */
.context-panel {
  width: 280px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
  border-left: 1px solid var(--border);
  overflow-y: auto;
  flex-shrink: 0;
  background: var(--bg-tertiary);
}

/* Player Profile */
.profile-section {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 0 8px;
  border-bottom: 1px solid var(--border);
}

.profile-portrait {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 2px solid var(--text-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-secondary);
  flex-shrink: 0;
}

.profile-portrait__silhouette {
  font-size: 1.385rem;
  font-weight: 700;
}

.profile-section__info {
  display: flex;
  flex-direction: column;
  gap: 1px;
  min-width: 0;
}

.profile-section__name {
  font-size: 1rem;
  font-weight: 700;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.profile-section__race {
  font-size: 0.769rem;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.profile-section__credits {
  font-size: 0.846rem;
  color: var(--text-secondary);
}

/* Compact bars for context panel */
.ctx-bar-section {
  padding: 4px 0;
}

.ctx-bar-label {
  display: flex;
  justify-content: space-between;
  font-size: 0.769rem;
  color: var(--text-secondary);
  margin-bottom: 2px;
}

.ctx-bar {
  height: 6px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: 3px;
  overflow: hidden;
}

.ctx-bar__fill {
  height: 100%;
  transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.ctx-bar__fill--energy {
  background: var(--cyan);
}

.ctx-bar__fill--cargo {
  background: var(--cyan);
}

/* Ship Card in context panel */
.ship-card {
  padding: 6px 0;
  border-bottom: 1px solid var(--border);
}

.ship-card__header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.ship-card__header-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.ship-card__type {
  font-size: 0.923rem;
  font-weight: 500;
  color: var(--text-primary);
  text-transform: capitalize;
}

.ship-card__stats-row {
  display: flex;
  gap: 8px;
  font-size: 0.769rem;
}

.ship-card__cargo-breakdown {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  font-size: 0.692rem;
  margin-top: 2px;
}

/* Self-Destruct Button */
.btn-self-destruct {
  width: 100%;
  margin-top: 6px;
  padding: 3px 0;
  font-size: 0.692rem;
  font-family: inherit;
  letter-spacing: 1px;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}
.btn-self-destruct:hover {
  border-color: var(--red);
  color: var(--red);
}
.btn-self-destruct:disabled {
  opacity: 0.3;
  cursor: not-allowed;
  border-color: var(--border);
  color: var(--text-secondary);
}
.btn-self-destruct:disabled:hover {
  border-color: var(--border);
  color: var(--text-secondary);
}
.btn-self-destruct--active {
  border-color: var(--red);
  color: var(--red);
  background: rgba(255, 85, 85, 0.1);
  animation: destruct-pulse 0.8s ease-in-out infinite;
}
@keyframes destruct-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

/* Mini Chat */
/* Context panel section headers */
.ctx-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 4px 0;
  margin-bottom: 4px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(90deg, rgba(232, 71, 160, 0.06), transparent 50%);
}

.ctx-section-header__label {
  font-size: 0.692rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--text-secondary);
}

.ctx-section-header__channels {
  display: flex;
  align-items: center;
  gap: 2px;
}

.mini-chat {
  display: flex;
  flex-direction: column;
  padding: 0 0 6px;
  border-bottom: 1px solid var(--border);
  flex: 1;
  min-height: 0;
}

.mini-chat__messages {
  flex: 1;
  overflow-y: auto;
  min-height: 100px;
  max-height: 200px;
  scrollbar-width: thin;
  scrollbar-color: var(--border) var(--bg-primary);
}

.mini-chat__msg {
  font-size: 0.769rem;
  padding: 1px 0;
  word-break: break-word;
  color: var(--text-primary);
}

.mini-chat__msg--own {
  color: var(--cyan);
}

.mini-chat__sender {
  color: var(--green);
  font-weight: bold;
}

.mini-chat__msg--own .mini-chat__sender {
  color: var(--cyan);
}

.mini-chat__input {
  margin-top: 3px;
}

.mini-chat__input input {
  width: 100%;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  color: var(--text-primary);
  padding: 3px 6px;
  font-size: 0.769rem;
  font-family: inherit;
  border-radius: 3px;
  outline: none;
}

.mini-chat__input input:focus {
  border-color: var(--cyan);
}

/* Command Input */
.cmd-input-section {
  padding: 0;
  margin-top: auto;
  background: linear-gradient(to bottom, transparent, rgba(232, 71, 160, 0.03));
}

.cmd-input-row {
  display: flex;
  align-items: center;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 3px;
  padding: 0 6px;
  margin-top: 4px;
  box-shadow: 0 -1px 4px rgba(232, 71, 160, 0.06);
}

.cmd-prompt {
  color: var(--magenta);
  margin-right: 6px;
  font-size: 0.923rem;
  user-select: none;
}

.cmd-input {
  flex: 1;
  background: none;
  border: none;
  outline: none;
  color: var(--text-primary);
  font-family: inherit;
  font-size: 0.923rem;
  padding: 4px 0;
  caret-color: var(--magenta);
}

.cmd-input::placeholder {
  color: var(--text-muted);
}

.context-panel__subheader {
  font-size: 0.769rem;
  text-transform: uppercase;
  color: var(--text-secondary);
  padding: 4px 0;
  border-bottom: 1px solid var(--border);
  margin-bottom: 4px;
}

.action-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding: 4px 0;
}

.btn-action {
  padding: 4px 10px;
  font-size: 0.846rem;
  font-family: 'IBM Plex Mono', monospace;
  background: var(--bg-secondary);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-radius: 3px;
  cursor: pointer;
  text-transform: uppercase;
}
.btn-action:hover { background: var(--bg-primary); border-color: var(--cyan, #56d4dd); }
.btn-action--dock { color: var(--cyan, #56d4dd); border-color: var(--cyan, #56d4dd); animation: dock-glow 2s ease-in-out infinite; }
.btn-action--undock { color: var(--yellow); border-color: var(--yellow); }
.btn-action--combat { color: var(--orange); border-color: var(--orange); }

.move-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding: 4px 0;
}

.btn-move {
  padding: 3px 8px;
  font-size: 0.846rem;
  font-family: 'IBM Plex Mono', monospace;
  background: var(--bg-secondary);
  color: var(--cyan, #56d4dd);
  border: 1px solid var(--border);
  border-radius: 3px;
  cursor: pointer;
}
.btn-move:hover { border-color: var(--cyan, #56d4dd); background: var(--bg-primary); }

/* === Status Bar === */
.status-bar {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  padding: 8px 16px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border);
}

.status-section {
  display: flex;
  align-items: center;
  gap: 6px;
}

.status-label {
  font-size: 0.769rem;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.status-value {
  font-size: 1.077rem;
  font-weight: 500;
}

/* === Panels === */
.panel {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: 4px;
  overflow: hidden;
}

.panel-header {
  padding: 6px 12px;
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border);
  font-size: 0.846rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--magenta);
}

.panel-body {
  padding: 8px 12px;
  font-size: 1rem;
}

.panel-subheader {
  font-size: 0.846rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-secondary);
  margin-top: 8px;
  margin-bottom: 4px;
  padding-top: 6px;
  border-top: 1px solid var(--border);
}

.panel-row {
  padding: 2px 0;
}

.panel-label {
  color: var(--text-secondary);
  margin-right: 8px;
}

/* === Adjacent Sectors === */
.adjacent-sectors {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 4px;
}

.sector-btn {
  padding: 2px 8px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 3px;
  color: var(--blue);
  font-family: inherit;
  font-size: 0.923rem;
  cursor: pointer;
  transition: all 0.15s;
}

.sector-btn:hover {
  border-color: var(--blue);
  background: rgba(88, 166, 255, 0.1);
}

/* === Target Selection === */
.target-row {
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 3px;
  transition: background 0.15s;
}

.target-row:hover {
  background: rgba(240, 136, 62, 0.1);
}

.target-row.selected {
  background: rgba(240, 136, 62, 0.2);
  border-left: 2px solid var(--orange);
}

/* === Combat Controls === */
.combat-controls {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border);
}

.combat-buttons {
  display: flex;
  gap: 8px;
  margin-top: 8px;
}

/* === Trade Table === */
.trade-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.923rem;
}

.trade-table th {
  text-align: left;
  padding: 4px 6px;
  border-bottom: 1px solid var(--border);
  color: var(--text-secondary);
  font-size: 0.769rem;
  text-transform: uppercase;
}

.trade-table td {
  padding: 4px 6px;
  border-bottom: 1px solid var(--bg-tertiary);
}

.commodity-name {
  text-transform: capitalize;
}

.trade-controls {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border);
  font-size: 0.923rem;
  color: var(--text-secondary);
}

.qty-input {
  width: 60px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 3px;
  padding: 2px 6px;
  color: var(--text-primary);
  font-family: inherit;
  font-size: 0.923rem;
  outline: none;
}

.qty-input:focus {
  border-color: var(--magenta);
}

/* === Text Colors === */
.text-success { color: var(--green); }
.text-error { color: var(--red); }
.text-warning { color: var(--yellow); }
.text-combat { color: var(--orange); }
.text-trade { color: var(--purple); }
.text-system { color: var(--blue); }
.text-muted { color: var(--text-secondary); }

/* === Race Selection === */
.race-selection {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.race-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

@media (max-height: 700px) {
  .race-grid {
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }
  .race-card {
    padding: 8px 10px;
  }
  .race-card__desc {
    display: none;
  }
}

.race-card {
  padding: 12px;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg-primary);
  cursor: pointer;
  transition: all 0.2s;
}

.race-card:hover {
  border-color: var(--text-secondary);
}

.race-card--selected {
  border-color: var(--magenta);
  background: var(--magenta-dim);
  box-shadow: 0 0 12px rgba(232, 71, 160, 0.15);
}

.race-card__header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: 8px;
}

.race-card__name {
  font-size: 1.077rem;
  font-weight: 700;
  color: var(--magenta);
}

.race-card__nickname {
  font-size: 0.846rem;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.race-card__desc {
  font-size: 0.846rem;
  color: var(--text-secondary);
  line-height: 1.3;
  margin-bottom: 8px;
}

.race-card__stats {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.race-card__stat {
  display: flex;
  justify-content: space-between;
  font-size: 0.923rem;
}

.race-card__label {
  color: var(--text-muted);
  text-transform: uppercase;
  font-size: 0.769rem;
  letter-spacing: 1px;
}

.race-card__value {
  color: var(--text-primary);
}

.race-card__value--trait {
  color: var(--blue);
}

.race-card__value--bonus {
  color: var(--yellow);
}

.race-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
}

.race-actions .btn {
  min-width: 120px;
}

.btn-secondary {
  background: var(--bg-tertiary);
  border-color: var(--text-muted);
  color: var(--text-secondary);
}

.btn-secondary:hover {
  border-color: var(--text-secondary);
  color: var(--text-primary);
}

/* === Tutorial Overlay === */
.tutorial-overlay {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 6px 16px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border);
  font-size: 0.923rem;
}

.tutorial-overlay__left {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 180px;
}

.tutorial-overlay__label {
  color: var(--yellow);
  font-weight: 700;
  font-size: 0.769rem;
  letter-spacing: 2px;
  text-transform: uppercase;
}

.tutorial-overlay__progress {
  width: 80px;
  height: 4px;
  background: var(--bg-primary);
  border-radius: 2px;
  overflow: hidden;
}

.tutorial-overlay__progress-bar {
  height: 100%;
  background: var(--yellow);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.tutorial-overlay__step {
  color: var(--text-secondary);
  font-size: 0.846rem;
}

.tutorial-overlay__center {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 12px;
}

.tutorial-overlay__title {
  color: var(--text-primary);
  font-weight: 500;
}

.tutorial-overlay__hint {
  color: var(--magenta);
  font-size: 0.846rem;
}

.tutorial-overlay__right {
  display: flex;
  gap: 8px;
}

.tutorial-overlay__btn {
  padding: 2px 8px;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: 3px;
  color: var(--text-secondary);
  font-family: inherit;
  font-size: 0.846rem;
  cursor: pointer;
  transition: all 0.15s;
}

.tutorial-overlay__btn:hover {
  border-color: var(--text-secondary);
  color: var(--text-primary);
}

.tutorial-overlay__btn--skip {
  border-color: var(--text-muted);
  color: var(--text-muted);
}

.tutorial-overlay__btn--skip:hover {
  border-color: var(--red);
  color: var(--red);
}

/* === Intro Sequence === */
.intro-sequence {
  position: fixed;
  inset: 0;
  background: var(--bg-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  cursor: pointer;
}

.intro-sequence__container {
  max-width: 700px;
  width: 100%;
  padding: 40px 32px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.intro-sequence__title {
  color: var(--magenta);
  font-size: 1.077rem;
  font-weight: 700;
  letter-spacing: 4px;
  text-align: center;
  margin-bottom: 32px;
  opacity: 0.7;
}

.intro-sequence__text {
  flex: 1;
  overflow-y: auto;
  margin-bottom: 24px;
}

.intro-sequence__beat {
  margin-bottom: 16px;
  line-height: 1.7;
  font-size: 1.077rem;
}

.intro-sequence__beat--done {
  color: var(--text-secondary);
  opacity: 0.6;
}

.intro-sequence__beat--active {
  color: var(--text-primary);
  animation: intro-fade-in 0.5s ease-in;
}

@keyframes intro-fade-in {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

.intro-sequence__ascii {
  font-family: 'IBM Plex Mono', 'Consolas', monospace;
  color: var(--magenta-dim);
  font-size: 0.769rem;
  line-height: 1.2;
  margin-bottom: 16px;
  text-align: center;
  animation: intro-fade-in 0.8s ease-in;
  overflow-x: auto;
}

.intro-sequence__cursor {
  color: var(--magenta);
  animation: cursor-blink 0.8s step-end infinite;
}

@keyframes cursor-blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.intro-sequence__controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: 16px;
  border-top: 1px solid var(--border);
}

.intro-sequence__prompt {
  color: var(--text-muted);
  font-size: 0.923rem;
}

.intro-sequence__skip {
  padding: 4px 12px;
  background: transparent;
  border: 1px solid var(--text-muted);
  border-radius: 3px;
  color: var(--text-muted);
  font-family: inherit;
  font-size: 0.846rem;
  cursor: pointer;
  transition: all 0.15s;
}

.intro-sequence__skip:hover {
  border-color: var(--text-secondary);
  color: var(--text-secondary);
}

.intro-sequence__continue {
  width: 100%;
  padding: 12px 24px;
  background: var(--magenta-dim);
  border: 1px solid var(--magenta);
  border-radius: 4px;
  color: var(--magenta);
  font-family: inherit;
  font-size: 1.077rem;
  font-weight: 700;
  letter-spacing: 2px;
  cursor: pointer;
  transition: all 0.2s;
}

.intro-sequence__continue:hover {
  background: var(--magenta);
  color: var(--bg-primary);
}

/* === Audio Mute Toggle === */
.audio-toggle {
  padding: 2px 8px;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: 3px;
  color: var(--text-secondary);
  font-family: inherit;
  font-size: 0.923rem;
  cursor: pointer;
  transition: all 0.15s;
}

.audio-toggle:hover {
  border-color: var(--text-secondary);
  color: var(--text-primary);
}

.audio-toggle--muted {
  color: var(--text-muted);
  border-color: var(--text-muted);
}

.audio-toggle--logout {
  border-color: var(--red);
  color: var(--red);
}

.audio-toggle--logout:hover {
  background: rgba(248, 81, 73, 0.15);
  border-color: var(--red);
  color: var(--red);
}

.audio-controls {
  display: flex;
  align-items: center;
  gap: 2px;
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 0 2px;
  background: rgba(0, 0, 0, 0.2);
}

.audio-controls__btn {
  background: transparent;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 1rem;
  padding: 2px 5px;
  border-radius: 3px;
  transition: color 0.15s, background 0.15s;
  line-height: 1;
}

.audio-controls__btn:hover {
  color: var(--text-primary);
  background: rgba(255, 255, 255, 0.06);
}

.status-bar__actions {
  display: flex;
  gap: 6px;
  margin-left: auto;
  align-items: center;
}

/* === Sector Type Colors === */
.sector-type-standard { color: var(--text-primary); }
.sector-type-protected { color: var(--green); }
.sector-type-harmony_enforced { color: var(--blue); }
.sector-type-one_way { color: var(--yellow); }

/* === Sector Map === */
.sector-map-container {
  padding: 0;
}

.sector-map-svg {
  width: 100%;
  height: 100%;
  display: block;
}

/* Edges — extremely subtle */
.sector-map-edge {
  stroke: rgba(100, 120, 160, 0.15);
  stroke-width: 0.4;
}

.sector-map-edge--oneway {
  stroke: rgba(210, 153, 34, 0.2);
  stroke-dasharray: 4 3;
  stroke-width: 0.4;
}

/* Star glow layer */
.sector-star-glow {
  opacity: 0.6;
  pointer-events: none;
}

.sector-map-node--adjacent .sector-star-glow {
  opacity: 0.8;
}

.sector-map-node--current .sector-star-glow {
  opacity: 1;
}

.sector-map-node:hover .sector-star-glow {
  opacity: 0.9;
}

/* Star core — tiny bright dot */
.sector-star-core {
  filter: drop-shadow(0 0 1px rgba(255, 255, 255, 0.8));
  pointer-events: none;
}

.sector-map-node--adjacent:hover .sector-star-core {
  filter: drop-shadow(0 0 3px rgba(160, 200, 255, 0.9));
}

/* Bloom effect — current sector only */
.sector-star-bloom {
  opacity: 0.5;
  pointer-events: none;
  animation: star-bloom-pulse 3s ease-in-out infinite;
}

@keyframes star-bloom-pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.7; }
}

/* Pulse animation for current sector — cyan */
.sector-node-pulse {
  fill: none;
  stroke: rgba(86, 212, 221, 0.6);
  stroke-width: 1.5;
  opacity: 0;
  animation: sector-pulse 3s ease-out infinite;
}

@keyframes sector-pulse {
  0% { transform: scale(1); opacity: 0.6; }
  100% { transform: scale(2); opacity: 0; }
}

/* Node labels — hidden by default, shown on hover/current/adjacent */
.sector-node-label {
  font-family: 'IBM Plex Mono', 'Consolas', monospace;
  font-size: 0.692rem;
  fill: var(--text-secondary);
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s;
}

.sector-map-node:hover .sector-node-label {
  opacity: 0.8;
}

.sector-node-label--current {
  fill: #56d4dd;
  font-weight: 700;
  opacity: 1;
}

.sector-node-label--adjacent {
  opacity: 0.6;
}

/* Sector name label */
.sector-node-name {
  fill: #56d4dd;
  font-family: 'IBM Plex Mono', 'Consolas', monospace;
  font-size: 6px;
  pointer-events: none;
  opacity: 0.7;
}

/* Star Mall icon — subtle dot */
.sector-star-mall-icon {
  fill: var(--yellow);
  pointer-events: none;
  opacity: 0.5;
  transition: opacity 0.2s;
}

.sector-map-node:hover .sector-star-mall-icon {
  opacity: 0.8;
}

/* Outpost icon — subtle */
.sector-outpost-icon {
  fill: var(--green);
  pointer-events: none;
  opacity: 0.35;
  transition: opacity 0.2s;
}

.sector-map-node:hover .sector-outpost-icon {
  opacity: 0.8;
}

/* Planet icon — subtle */
.sector-planet-icon {
  fill: var(--blue);
  pointer-events: none;
  opacity: 0.35;
  transition: opacity 0.2s;
}

.sector-map-node:hover .sector-planet-icon {
  opacity: 0.8;
}

/* One-way arrowhead marker — subtle */
.sector-map-arrowhead polygon {
  fill: rgba(210, 153, 34, 0.3);
}

/* Zoom controls */
.sector-map-controls {
  float: right;
  display: inline-flex;
  gap: 2px;
}

.sector-map-zoom-btn {
  width: 20px;
  height: 20px;
  padding: 0;
  font-family: 'IBM Plex Mono', 'Consolas', monospace;
  font-size: 1.077rem;
  line-height: 18px;
  text-align: center;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: 3px;
  color: var(--text-primary);
  cursor: pointer;
  transition: all 0.15s;
}

.sector-map-zoom-btn:hover:not(:disabled) {
  border-color: #56d4dd;
  color: #56d4dd;
}

.sector-map-zoom-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* Legend */
.sector-map-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 4px 8px;
  border-top: 1px solid var(--border);
  font-size: 0.769rem;
}

.sector-map-legend-item {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  color: var(--text-secondary);
}

/* (Node icons defined above in Sector Map section) */

/* Sector map body — keep SVG unconstrained */
.sector-map-body {
  max-height: none;
  overflow: visible;
}

/* Compact sector map (context panel) */
.sector-map-compact .sector-map-svg {
  height: 200px;
}

/* === Collapsible Panels === */
.collapsible-panel__header {
  cursor: pointer;
  user-select: none;
  display: flex;
  align-items: center;
  gap: 6px;
}

.collapsible-panel__header:hover {
  background: var(--bg-primary);
}

.collapsible-panel__toggle {
  font-size: 0.769rem;
  color: var(--cyan);
  width: 12px;
}

.collapsible-panel__title {
  flex: 1;
}

.collapsible-panel__badge {
  background: var(--cyan);
  color: var(--bg-primary);
  font-size: 0.769rem;
  padding: 1px 6px;
  border-radius: 8px;
  font-weight: bold;
}

/* === Ship Status Panel === */
.cargo-bar {
  height: 8px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 4px;
  overflow: hidden;
  margin: 4px 0;
}

.cargo-bar__fill {
  height: 100%;
  background: var(--cyan);
  transition: width 0.3s ease;
}

.cargo-breakdown {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  font-size: 0.846rem;
}

.cargo-item {
  padding: 1px 4px;
  border-radius: 2px;
  background: var(--bg-tertiary);
}

.cargo-item--cyr { color: var(--magenta); }
.cargo-item--food { color: var(--green); }
.cargo-item--tech { color: var(--cyan); }
.cargo-item--col { color: var(--yellow); }

/* === Active Missions Panel === */
.mission-item {
  padding: 4px 0;
  border-bottom: 1px solid var(--bg-tertiary);
}

.mission-item:last-child {
  border-bottom: none;
}

.mission-item__title {
  font-size: 0.923rem;
  color: var(--foreground);
  display: flex;
  align-items: center;
  gap: 5px;
}

.mission-item__desc {
  font-size: 0.769rem;
  color: var(--text-secondary);
  margin: 2px 0;
  line-height: 1.3;
}

.mission-item__progress {
  font-size: 0.846rem;
  color: var(--comment);
  display: flex;
  justify-content: space-between;
}

.mission-item__reward {
  color: var(--yellow);
}

/* === Planets Panel === */
.planet-panel-item {
  padding: 6px 0;
  border-bottom: 1px solid var(--bg-tertiary);
}

.planet-panel-item:last-child {
  border-bottom: none;
}

.planet-panel-item__header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
}

.planet-panel-item__name {
  font-size: 0.923rem;
  color: var(--foreground);
  font-weight: bold;
}

.planet-panel-item__class {
  font-size: 0.769rem;
  color: var(--cyan);
}

.planet-panel-item__details {
  display: flex;
  gap: 10px;
  font-size: 0.846rem;
  color: var(--comment);
  margin-top: 2px;
}

.planet-panel-item__stocks {
  display: flex;
  gap: 10px;
  font-size: 0.846rem;
  color: var(--yellow);
  margin-top: 2px;
}

.planet-panel-item__production {
  font-size: 0.769rem;
  color: var(--green);
  margin-top: 2px;
}

/* === Sector Chat Panel === */
.chat-messages {
  max-height: 120px;
  overflow-y: auto;
  margin-bottom: 6px;
  font-size: 0.923rem;
}

.chat-msg {
  padding: 2px 0;
  word-break: break-word;
}

.chat-msg--own {
  color: var(--cyan);
}

.chat-msg__name {
  color: var(--green);
  font-weight: bold;
}

.chat-msg--own .chat-msg__name {
  color: var(--cyan);
}

.chat-input-form {
  display: flex;
}

.chat-input {
  flex: 1;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  color: var(--foreground);
  padding: 4px 8px;
  font-size: 0.923rem;
  font-family: inherit;
  border-radius: 3px;
  outline: none;
}

.chat-input:focus {
  border-color: var(--cyan);
}

/* === Player List Panel === */
.player-list-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 3px 0;
}

.player-list-item__name {
  color: var(--yellow);
  font-size: 0.923rem;
}

/* === Inventory Panel === */
.inventory-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 3px 0;
}

.inventory-item__name {
  font-size: 0.923rem;
  color: var(--foreground);
  display: flex;
  align-items: center;
  gap: 5px;
}

.btn-sm.btn-use {
  background: var(--cyan);
  color: var(--bg-primary);
  border: none;
  padding: 2px 8px;
  border-radius: 3px;
  font-size: 0.769rem;
  cursor: pointer;
}

.btn-sm.btn-use:hover {
  opacity: 0.8;
}

.btn-sm.btn-use:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* === Inventory Resource Panel === */
.inventory-list { margin-top: 6px; }
.inventory-item__count { color: var(--cyan); font-size: 0.846rem; }
.inventory-item__qty { color: var(--cyan); font-size: 0.923rem; font-weight: bold; }

/* === Notes Panel === */
.notes-panel__input-row { display: flex; gap: 4px; margin-bottom: 6px; }
.notes-panel__input { flex: 1; background: var(--bg-primary); border: 1px solid var(--border); color: var(--text-primary); padding: 4px 6px; font-size: 0.846rem; font-family: inherit; }
.notes-panel__input:focus { border-color: var(--blue); outline: none; }
.note-entry { display: flex; align-items: flex-start; gap: 4px; padding: 3px 0; border-bottom: 1px solid var(--bg-tertiary); font-size: 0.846rem; }
.note-entry__content { flex: 1; word-break: break-word; }
.note-entry__id { color: var(--text-secondary); font-size: 0.769rem; }
.note-entry__delete { background: none; border: none; color: var(--text-secondary); cursor: pointer; font-size: 0.769rem; padding: 0 2px; }
.note-entry__delete:hover { color: var(--red); }

/* === Wallet Panel === */
.wallet-panel { font-size: 0.923rem; }
.wallet-connected { display: flex; flex-direction: column; gap: 6px; }
.wallet-address { display: flex; align-items: center; justify-content: space-between; }
.wallet-address__label { font-size: 0.769rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }
.wallet-address__value { font-family: 'IBM Plex Mono', monospace; color: var(--green); font-size: 0.923rem; }
.wallet-balance { display: flex; align-items: center; justify-content: space-between; }
.wallet-balance__label { font-size: 0.769rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }
.wallet-balance__value { color: var(--purple); font-weight: 500; }
.wallet-web3-hint { font-style: italic; color: var(--text-secondary); font-size: 0.846rem; padding-top: 6px; margin-top: 4px; border-top: 1px solid var(--border); }
.wallet-disconnect { border-color: var(--red); color: var(--red); margin-top: 4px; }
.wallet-disconnect:hover { background: rgba(248, 81, 73, 0.15); }
.wallet-connect { display: flex; flex-direction: column; }
.wallet-connectors { display: flex; gap: 6px; flex-wrap: wrap; }
.wallet-connector-btn { border-color: var(--blue); color: var(--blue); }
.wallet-connector-btn:hover { background: rgba(88, 166, 255, 0.15); }
.wallet-verify { display: flex; flex-direction: column; gap: 8px; }
.wallet-error { color: var(--red); font-size: 0.923rem; padding: 6px 8px; background: rgba(248, 81, 73, 0.1); border-radius: 4px; border: 1px solid rgba(248, 81, 73, 0.3); margin-bottom: 8px; }
.wallet-skip { display: flex; justify-content: flex-end; margin-top: 12px; }
.wallet-step { display: flex; flex-direction: column; gap: 8px; }
.wallet-step__title { color: var(--magenta); font-size: 1.077rem; font-weight: 700; letter-spacing: 2px; margin: 0; }
.wallet-step__subtitle { color: var(--text-secondary); font-size: 0.846rem; margin: 0 0 4px 0; }

/* === Pixel Scene Animations === */
.pixel-scene--fullscreen {
  position: fixed;
  inset: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-primary);
}

.pixel-scene--sidebar {
  position: relative;
  border: 1px solid var(--border);
  border-radius: 4px;
  overflow: hidden;
  background: var(--bg-primary);
  margin-bottom: 8px;
}

.pixel-scene--inline {
  display: block;
  margin: 8px 0;
  border: 1px solid var(--border);
  border-radius: 4px;
  overflow: hidden;
  background: var(--bg-primary);
}

.pixel-scene__stage {
  display: block;
  width: 100%;
  image-rendering: pixelated;
}

.pixel-scene__actor {
  transition: all 300ms ease;
}

.pixel-scene__text {
  position: absolute;
  bottom: 16%;
  left: 50%;
  transform: translateX(-50%);
  color: var(--magenta);
  font-family: 'IBM Plex Mono', 'Consolas', monospace;
  font-size: 1.077rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 4px;
  white-space: nowrap;
  animation: scene-text-fade-in 1s ease forwards;
  pointer-events: none;
}

.pixel-scene__skip {
  position: absolute;
  bottom: 16px;
  right: 16px;
  padding: 6px 16px;
  background: transparent;
  border: 1px solid var(--text-muted);
  border-radius: 3px;
  color: var(--text-muted);
  font-family: inherit;
  font-size: 0.923rem;
  cursor: pointer;
  transition: all 0.15s;
  z-index: 10;
}

.pixel-scene__skip:hover {
  border-color: var(--text-secondary);
  color: var(--text-secondary);
}

.pixel-scene__text--danger {
  color: var(--red);
}

/* Scene text fade-in */
@keyframes scene-text-fade-in {
  from { opacity: 0; transform: translateX(-50%) translateY(8px); }
  to { opacity: 1; transform: translateX(-50%) translateY(0); }
}

/* Flash effect */
.pixel-scene__flash {
  animation: scene-flash 400ms ease-out forwards;
}

@keyframes scene-flash {
  from { opacity: 0.8; }
  to { opacity: 0; }
}

/* Star twinkle */
.pixel-scene__star {
  animation: star-twinkle 3s ease-in-out infinite;
}

@keyframes star-twinkle {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}

/* Warp line streak */
.pixel-scene__warp-line {
  animation: warp-line-streak 0.6s linear infinite;
}

@keyframes warp-line-streak {
  from { transform: scaleX(1); opacity: 0.6; }
  to { transform: scaleX(8); opacity: 0; }
}

/* Laser fire */
.pixel-scene__laser {
  animation: laser-fire 800ms ease-out forwards;
}

@keyframes laser-fire {
  from { transform: scaleX(0); opacity: 1; transform-origin: left center; }
  to { transform: scaleX(1); opacity: 0.3; transform-origin: left center; }
}

/* Actor hit flash */
.pixel-scene__actor-hit {
  animation: actor-hit-flash 600ms ease;
}

@keyframes actor-hit-flash {
  0%, 100% { filter: brightness(1); }
  16% { filter: brightness(3); }
  33% { filter: brightness(1); }
  50% { filter: brightness(3); }
  66% { filter: brightness(1); }
  83% { filter: brightness(3); }
}

/* CRT vignette for fullscreen */
.pixel-scene--fullscreen::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center, transparent 50%, rgba(0, 0, 0, 0.6) 100%);
  pointer-events: none;
}

/* Scanlines overlay */
.pixel-scene__scanlines {
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    to bottom,
    transparent 0px,
    transparent 2px,
    rgba(0, 0, 0, 0.15) 2px,
    rgba(0, 0, 0, 0.15) 4px
  );
  pointer-events: none;
}

/* === Pixel Sprites === */
.pixel-sprite { display: inline-block; vertical-align: middle; image-rendering: pixelated; flex-shrink: 0; }
.ship-status-sprite-header { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 6px; padding-bottom: 6px; border-bottom: 1px solid var(--border); }
.ship-status-sprite { filter: drop-shadow(0 0 4px rgba(232, 71, 160, 0.3)); }
.ship-status-sprite-header__info { flex: 1; }
.map-planet-row { display: flex; align-items: center; gap: 6px; }
.commodity-cell { display: inline-flex; align-items: center; gap: 5px; }
.combat-subheader { display: flex; align-items: center; gap: 5px; }

/* === CSS Animations === */

/* Low hull/energy pulse */
@keyframes pulse-red {
  0%, 100% { color: var(--red); }
  50% { color: var(--text-primary); }
}
.hull-critical { animation: pulse-red 1s ease-in-out infinite; }

/* Activity bar badge pulse */
@keyframes badge-pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.15); opacity: 0.85; }
}

/* Subtle idle blink for inactive activity-bar buttons */
@keyframes activity-btn-pulse {
  0%, 100% { opacity: 0.45; }
  50% { opacity: 0.65; }
}

/* Combat flash on terminal */
@keyframes combat-flash {
  0% { background: rgba(255, 100, 0, 0.15); }
  100% { background: transparent; }
}
.terminal--combat-flash { animation: combat-flash 0.3s ease-out; }

/* Dock glow on action button */
@keyframes dock-glow {
  0%, 100% { box-shadow: 0 0 4px var(--cyan); }
  50% { box-shadow: 0 0 12px var(--cyan); }
}

/* Ambient blink for engagement */
@keyframes ambient-blink {
  0%, 90%, 100% { opacity: 1; }
  95% { opacity: 0.6; }
}
.ambient-blink { animation: ambient-blink 4s ease-in-out infinite; }

/* === Ambient Life Animations === */

/* 1. Sector map node twinkle — opacity-based shimmer for star effect */
@keyframes node-twinkle {
  0%, 90%, 100% { opacity: 1; }
  95% { opacity: 0.5; }
}

.sector-map-node--twinkle { animation: node-twinkle var(--twinkle-dur, 8s) ease-in-out infinite; animation-delay: var(--twinkle-delay, 0s); }

/* 2. Log prefix icon pulse */
@keyframes log-prefix-pulse {
  0%, 80%, 100% { opacity: 1; }
  85% { opacity: 0.4; }
  90% { opacity: 1; }
  95% { opacity: 0.5; }
}

.log-prefix--animated { animation: log-prefix-pulse var(--prefix-dur, 6s) ease-in-out infinite; animation-delay: var(--prefix-delay, 0s); }

/* 3. Activity bar idle shimmer — random glow on inactive icons */
@keyframes activity-shimmer {
  0%, 70%, 100% { filter: brightness(1) drop-shadow(0 0 0 transparent); }
  75% { filter: brightness(1.4) drop-shadow(0 0 4px rgba(232, 71, 160, 0.4)); }
  85% { filter: brightness(1) drop-shadow(0 0 0 transparent); }
}

.activity-bar__btn--shimmer:not(.activity-bar__btn--active) {
  animation: activity-shimmer var(--shimmer-dur, 10s) ease-in-out infinite;
  animation-delay: var(--shimmer-delay, 0s);
}

/* 4. Border accent pulse — corner accents randomly brighten */
@keyframes corner-pulse {
  0%, 60%, 100% { opacity: 0.4; }
  65% { opacity: 0.9; }
  75% { opacity: 0.4; }
  80% { opacity: 0.7; }
  85% { opacity: 0.4; }
}

.game-main::before { animation: corner-pulse 7s ease-in-out infinite; }
.game-main::after { animation: corner-pulse 9s ease-in-out infinite 2s; }
.game-center::before { animation: corner-pulse 11s ease-in-out infinite 4s; }
.game-center::after { animation: corner-pulse 8s ease-in-out infinite 1s; }

/* 5. Ship sprite breathing glow */
@keyframes ship-breathe {
  0%, 100% { filter: drop-shadow(0 0 4px rgba(232, 71, 160, 0.3)); }
  50% { filter: drop-shadow(0 0 10px rgba(232, 71, 160, 0.6)); }
}

.ship-status-sprite--breathing { animation: ship-breathe 4s ease-in-out infinite; }

/* 6. Status bar value flicker */
@keyframes value-flicker {
  0%, 88%, 92%, 96%, 100% { opacity: 1; }
  89% { opacity: 0.6; }
  91% { opacity: 0.85; }
  93% { opacity: 0.5; }
  95% { opacity: 0.9; }
}

.status-value--flicker { animation: value-flicker var(--flicker-dur, 12s) ease-in-out infinite; animation-delay: var(--flicker-delay, 0s); }

/* 7. Notification log scanline sweep */
@keyframes log-scanline {
  0% { top: -2px; opacity: 0; }
  5% { opacity: 0.4; }
  95% { opacity: 0.4; }
  100% { top: 100%; opacity: 0; }
}

.log-output { position: relative; }

.log-scanline {
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent 0%, rgba(232, 71, 160, 0.25) 20%, rgba(232, 71, 160, 0.4) 50%, rgba(232, 71, 160, 0.25) 80%, transparent 100%);
  pointer-events: none;
  z-index: 1;
  animation: log-scanline var(--scanline-dur, 8s) linear infinite;
  animation-delay: var(--scanline-delay, 0s);
}

/* === Status Bar Value Flash === */
@keyframes status-flash-gain {
  0% { background: rgba(63, 185, 80, 0.25); color: #3fb950; }
  100% { background: transparent; }
}
@keyframes status-flash-loss {
  0% { background: rgba(248, 81, 73, 0.25); color: #f85149; }
  100% { background: transparent; }
}
.status-flash--gain {
  animation: status-flash-gain 0.6s ease-out;
  border-radius: 2px;
  padding: 0 2px;
}
.status-flash--loss {
  animation: status-flash-loss 0.6s ease-out;
  border-radius: 2px;
  padding: 0 2px;
}

/* === Context Panel Enhancements === */

/* Action button hover glow */
.btn-action {
  transition: box-shadow 0.2s ease, background 0.2s ease, border-color 0.2s ease;
}
.btn-action:hover {
  box-shadow: 0 0 8px rgba(86, 212, 221, 0.35);
}
.btn-action--combat:hover {
  box-shadow: 0 0 8px rgba(240, 136, 62, 0.4);
}
.btn-action--undock:hover {
  box-shadow: 0 0 8px rgba(210, 153, 34, 0.4);
}

/* Smooth stat bar fill transitions */
.cargo-bar__fill {
  transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Context panel section headers subtle glow on hover */
.context-panel__subheader {
  transition: color 0.2s ease;
}
.context-panel__subheader:hover {
  color: var(--magenta);
}

/* === Panel Switch Transition === */
.game-panel-content {
  animation: panel-fade-in 0.2s ease-out;
}
@keyframes panel-fade-in {
  from { opacity: 0.4; }
  to { opacity: 1; }
}

/* Panel content fade on switch */
.panel-content {
  animation: panel-content-slide 0.2s ease-out;
}
@keyframes panel-content-slide {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

/* === Trade Table Enhancements === */
.trade-table tbody tr {
  transition: background 0.15s ease;
}
.trade-table tbody tr:nth-child(even) {
  background: rgba(255, 255, 255, 0.015);
}
.trade-table tbody tr:hover {
  background: rgba(163, 113, 247, 0.06);
}
.trade-table tbody tr:hover td {
  color: var(--text-primary);
}

/* === Border Corner Accents === */
.game-main {
  position: relative;
}
.game-main::before,
.game-main::after {
  content: '';
  position: absolute;
  width: 12px;
  height: 12px;
  pointer-events: none;
  z-index: 5;
}
.game-main::before {
  top: 0; left: 0;
  border-top: 1px solid var(--magenta);
  border-left: 1px solid var(--magenta);
  opacity: 0.4;
}
.game-main::after {
  bottom: 0; right: 0;
  border-bottom: 1px solid var(--magenta);
  border-right: 1px solid var(--magenta);
  opacity: 0.4;
}

/* Additional corners via game-center */
.game-center::before,
.game-center::after {
  content: '';
  position: absolute;
  width: 12px;
  height: 12px;
  pointer-events: none;
  z-index: 5;
}
.game-center::before {
  top: 0; right: 0;
  border-top: 1px solid var(--magenta);
  border-right: 1px solid var(--magenta);
  opacity: 0.4;
}
.game-center::after {
  bottom: 0; left: 0;
  border-bottom: 1px solid var(--magenta);
  border-left: 1px solid var(--magenta);
  opacity: 0.4;
}

/* === Ambient Noise Texture === */
.game-layout::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9999;
  opacity: 0.025;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
}

/* === Data Stream Rain === */
.data-rain {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 0;
}

.data-rain__col {
  position: absolute;
  top: -100%;
  display: flex;
  flex-direction: column;
  font-family: 'IBM Plex Mono', monospace;
  font-size: 0.769rem;
  line-height: 1.4;
  color: var(--magenta);
  white-space: nowrap;
  animation: data-rain-fall linear infinite;
  text-shadow: 0 0 4px currentColor;
}

.data-rain__col span:first-child {
  opacity: 1;
  color: #e8e8e8;
  text-shadow: 0 0 6px var(--magenta);
}

@keyframes data-rain-fall {
  0% { transform: translateY(0); }
  100% { transform: translateY(300%); }
}

/* === Notification Bar (collapsed log) === */
.notification-bar {
  flex-shrink: 0;
  border-top: 1px solid var(--border);
  border-bottom: 6px solid #444;
  background: var(--bg-secondary);
  display: flex;
  flex-direction: column;
}

.notification-bar__header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 3px 10px;
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border);
  font-size: 0.769rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--magenta);
}

.notification-bar__toggle {
  padding: 0;
  font-size: 0.769rem;
  font-family: 'IBM Plex Mono', monospace;
  background: transparent;
  color: var(--cyan);
  border: none;
  cursor: pointer;
  line-height: 1;
}

.notification-bar__toggle:hover {
  color: var(--text-primary);
}

.notification-bar__label {
  flex: 1;
}

.log-clear-btn {
  padding: 1px 6px;
  font-size: 0.615rem;
  font-family: 'IBM Plex Mono', monospace;
  background: transparent;
  color: var(--text-secondary);
  border: 1px solid var(--border);
  border-radius: 3px;
  cursor: pointer;
  text-transform: uppercase;
}

.log-clear-btn:hover {
  color: var(--red);
  border-color: var(--red);
}

.notification-bar__lines {
  overflow: hidden;
  padding: 2px 10px;
  max-height: 1.5em; /* 1 line */
}

.notification-bar--expanded .notification-bar__lines {
  max-height: 40vh;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--border) var(--bg-primary);
}

.notification-bar--expanded .notification-bar__lines::-webkit-scrollbar {
  width: 6px;
}

.notification-bar--expanded .notification-bar__lines::-webkit-scrollbar-track {
  background: var(--bg-primary);
}

.notification-bar--expanded .notification-bar__lines::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
}

.log-line {
  font-size: 0.923rem;
  line-height: 1.5;
  padding: 1px 0;
  word-break: break-word;
  animation: log-line-slide-in 0.25s ease-out;
}

@keyframes log-line-slide-in {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

.log-line--info { color: var(--text-secondary); }
.log-line--success { color: var(--green); }
.log-line--error { color: var(--red); }
.log-line--warning { color: var(--yellow); }
.log-line--system { color: var(--blue); }
.log-line--combat { color: var(--orange); }
.log-line--trade { color: var(--purple); }

.log-prefix {
  font-weight: bold;
  margin-right: 4px;
  font-size: 0.846rem;
}

.log-prefix--error { color: var(--red); }
.log-prefix--warning { color: var(--yellow); }
.log-prefix--info { color: var(--cyan); }
.log-prefix--success { color: var(--green); }
.log-prefix--system { color: var(--blue); }
.log-prefix--combat { color: var(--orange); }
.log-prefix--trade { color: var(--purple); }

/* === Sector Map Full Mode === */
.sector-map-full {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--bg-secondary);
  overflow: hidden;
}

.sector-map-full__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 12px;
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border);
}

.sector-map-full__title {
  font-size: 0.846rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: #56d4dd;
}

.sector-map-full .sector-map-svg {
  height: 100%;
  min-height: 0;
}

.sector-map-full .sector-map-body {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  position: relative;
  background: #050810;
}

/* Vignette — dark edges for deep space feel */
.sector-map-full .sector-map-body::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse 70% 65% at 50% 50%, transparent 0%, rgba(5, 8, 16, 0.6) 80%, rgba(5, 8, 16, 0.95) 100%);
  pointer-events: none;
  z-index: 1;
}

/* === Space Background (Starfield + Nebula) === */
.space-bg {
  position: absolute;
  inset: 0;
  overflow: hidden;
  z-index: 0;
  pointer-events: none;
  background: #050810;
}

.space-bg__logo {
  position: absolute;
  top: 12px;
  left: 12px;
  width: 80px;
  height: auto;
  opacity: 0.75;
  z-index: 1;
  pointer-events: none;
  will-change: transform;
}

.space-bg__galaxies {
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  will-change: transform;
}

.space-bg__galaxy {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
}

/* Spiral galaxy — top right, purple tint, elongated so rotation is visible */
.space-bg__galaxy--1 {
  top: 8%;
  right: 12%;
  width: 90px;
  height: 40px;
  opacity: 0.14;
  border-radius: 50%;
  background:
    radial-gradient(ellipse 30% 50% at 50% 50%, rgba(255, 230, 255, 0.9), transparent 70%),
    radial-gradient(ellipse 100% 100% at 50% 50%, rgba(180, 100, 220, 0.4), transparent 65%),
    radial-gradient(ellipse 100% 40% at 50% 50%, rgba(200, 120, 255, 0.3), transparent 80%);
  animation: galaxy-spin-1 120s ease-in-out infinite;
}

/* Elliptical galaxy — bottom left, warm amber */
.space-bg__galaxy--2 {
  bottom: 15%;
  left: 8%;
  width: 55px;
  height: 45px;
  opacity: 0.12;
  border-radius: 50%;
  background:
    radial-gradient(ellipse 35% 35% at 50% 50%, rgba(255, 240, 200, 0.9), transparent 60%),
    radial-gradient(ellipse 90% 70% at 50% 50%, rgba(240, 160, 60, 0.35), transparent 65%);
  animation: galaxy-spin-2 150s ease-in-out infinite;
}

/* Edge-on spiral — center right, blue/cyan sliver */
.space-bg__galaxy--3 {
  top: 45%;
  right: 5%;
  width: 70px;
  height: 14px;
  opacity: 0.13;
  border-radius: 50%;
  background:
    radial-gradient(ellipse 25% 70% at 50% 50%, rgba(200, 240, 255, 0.9), transparent 60%),
    radial-gradient(ellipse 100% 100% at 50% 50%, rgba(80, 160, 220, 0.35), transparent 70%),
    linear-gradient(90deg, transparent 10%, rgba(60, 140, 220, 0.2) 30%, rgba(100, 180, 255, 0.25) 50%, rgba(60, 140, 220, 0.2) 70%, transparent 90%);
  animation: galaxy-spin-3 90s ease-in-out infinite;
}

/* Small distant galaxy — bottom right, pink tint */
.space-bg__galaxy--4 {
  bottom: 25%;
  right: 25%;
  width: 35px;
  height: 22px;
  opacity: 0.11;
  border-radius: 50%;
  background:
    radial-gradient(ellipse 40% 50% at 50% 50%, rgba(255, 210, 230, 0.8), transparent 60%),
    radial-gradient(ellipse 100% 80% at 50% 50%, rgba(200, 100, 150, 0.25), transparent 70%);
  animation: galaxy-spin-4 80s ease-in-out infinite;
}

/* Slow tumble — simulates viewing angle change, not clock rotation */
@keyframes galaxy-spin-1 {
  0%   { transform: rotate(-25deg) scaleY(1); }
  25%  { transform: rotate(-20deg) scaleY(0.6); }
  50%  { transform: rotate(-15deg) scaleY(1); }
  75%  { transform: rotate(-20deg) scaleY(0.7); }
  100% { transform: rotate(-25deg) scaleY(1); }
}
@keyframes galaxy-spin-2 {
  0%   { transform: rotate(15deg) scaleX(1); }
  30%  { transform: rotate(20deg) scaleX(0.7); }
  60%  { transform: rotate(12deg) scaleX(1); }
  100% { transform: rotate(15deg) scaleX(1); }
}
@keyframes galaxy-spin-3 {
  0%   { transform: rotate(40deg) scaleY(1); }
  35%  { transform: rotate(45deg) scaleY(1.4); }
  65%  { transform: rotate(38deg) scaleY(0.7); }
  100% { transform: rotate(40deg) scaleY(1); }
}
@keyframes galaxy-spin-4 {
  0%   { transform: rotate(-10deg) scaleY(1) scaleX(1); }
  30%  { transform: rotate(-5deg) scaleY(0.65) scaleX(1.1); }
  60%  { transform: rotate(-12deg) scaleY(1.1) scaleX(0.8); }
  100% { transform: rotate(-10deg) scaleY(1) scaleX(1); }
}

.space-bg__nebula {
  position: absolute;
  inset: -40px;
  background:
    radial-gradient(ellipse 600px 400px at 20% 30%, rgba(120, 30, 160, 0.18) 0%, transparent 70%),
    radial-gradient(ellipse 500px 350px at 75% 60%, rgba(30, 80, 170, 0.15) 0%, transparent 70%),
    radial-gradient(ellipse 400px 300px at 50% 80%, rgba(20, 130, 100, 0.12) 0%, transparent 70%),
    radial-gradient(ellipse 350px 250px at 85% 20%, rgba(160, 40, 100, 0.10) 0%, transparent 60%),
    radial-gradient(ellipse 450px 400px at 50% 45%, rgba(15, 30, 80, 0.20) 0%, transparent 65%);
  animation: nebula-drift 60s ease-in-out infinite alternate;
  will-change: transform;
}

@keyframes nebula-drift {
  0%   { background-position: 0% 0%, 100% 100%, 50% 80%, 85% 20%, 50% 45%; }
  33%  { background-position: 5% 10%, 90% 95%, 45% 85%, 80% 25%, 48% 50%; }
  66%  { background-position: -3% 5%, 95% 90%, 55% 75%, 90% 15%, 52% 42%; }
  100% { background-position: 2% -5%, 105% 105%, 48% 82%, 83% 22%, 50% 48%; }
}

.space-bg__stars {
  position: absolute;
  top: 0;
  left: 0;
  width: 1px;
  height: 1px;
  border-radius: 50%;
  will-change: transform;
}

/* Shooting stars */
.space-bg__shooting-stars {
  position: absolute;
  inset: 0;
  overflow: hidden;
  z-index: 0;
  pointer-events: none;
}

.shooting-star {
  position: absolute;
  height: 1px;
  width: 80px;
  border-radius: 1px;
  transform-origin: center center;
  opacity: 0;
}

/*
  Shooting stars use translate() for movement so the rotation stays
  aligned with the travel direction. The bright head leads, tail trails behind.
  atan2(dy, dx) gives the correct rotation for each path.
*/

/* #1 — far/slow, faint, thin — distant shooting star */
.shooting-star--1 {
  top: 0;
  left: 0;
  width: 50px;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(200, 210, 255, 0.2) 40%, rgba(255, 255, 255, 0.4));
  transform: rotate(16deg) translate(-120px, 0);
  animation: shoot-1 25s linear infinite;
}

@keyframes shoot-1 {
  0%, 70% { opacity: 0; transform: rotate(16deg) translate(-120px, 0); }
  72% { opacity: 0.5; transform: rotate(16deg) translate(-50px, 0); }
  88% { opacity: 0.3; }
  97% { opacity: 0; transform: rotate(16deg) translate(500px, 0); }
  100% { opacity: 0; transform: rotate(16deg) translate(500px, 0); }
}

/* #2 — mid distance, medium speed */
.shooting-star--2 {
  top: 15%;
  left: 0;
  width: 70px;
  background: linear-gradient(90deg, transparent, rgba(180, 200, 255, 0.3) 40%, rgba(255, 255, 255, 0.6));
  transform: rotate(155deg) translate(-120px, 0);
  animation: shoot-2 38s linear infinite;
}

@keyframes shoot-2 {
  0%, 74% { opacity: 0; transform: rotate(155deg) translate(-600px, 0); }
  76% { opacity: 0.7; transform: rotate(155deg) translate(-500px, 0); }
  86% { opacity: 0.4; }
  92% { opacity: 0; transform: rotate(155deg) translate(120px, 0); }
  100% { opacity: 0; transform: rotate(155deg) translate(120px, 0); }
}

/* #3 — closest/fastest, bright, grows as it flies past */
.shooting-star--3 {
  top: 0;
  left: 0;
  height: 1px;
  width: 120px;
  background: linear-gradient(90deg, transparent, rgba(180, 200, 255, 0.2) 20%, rgba(220, 230, 255, 0.6) 60%, rgba(255, 255, 255, 1));
  transform: rotate(35deg) translate(-150px, 0);
  animation: shoot-3 45s linear infinite;
}

@keyframes shoot-3 {
  0%, 80% { opacity: 0; transform: rotate(35deg) translate(-150px, 0); height: 1px; width: 120px; }
  81% { opacity: 0.3; transform: rotate(35deg) translate(-80px, 0); height: 1px; width: 120px; }
  84% { opacity: 0.8; transform: rotate(35deg) translate(150px, 0); height: 2px; width: 140px; }
  87% { opacity: 1; transform: rotate(35deg) translate(300px, 0); height: 3px; width: 160px; }
  90% { opacity: 0; transform: rotate(35deg) translate(550px, 0); height: 3px; width: 180px; }
  100% { opacity: 0; transform: rotate(35deg) translate(550px, 0); }
}

/* #4 — far/slow from right, faint and distant */
.shooting-star--4 {
  top: 20%;
  left: 100%;
  width: 45px;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(210, 200, 255, 0.2) 40%, rgba(255, 255, 255, 0.4));
  transform: rotate(200deg) translate(-120px, 0);
  animation: shoot-4 32s linear infinite;
}

@keyframes shoot-4 {
  0%, 68% { opacity: 0; transform: rotate(200deg) translate(-120px, 0); }
  70% { opacity: 0.4; transform: rotate(200deg) translate(-50px, 0); }
  86% { opacity: 0.25; }
  96% { opacity: 0; transform: rotate(200deg) translate(500px, 0); }
  100% { opacity: 0; transform: rotate(200deg) translate(500px, 0); }
}

/* #5 — close/fast from right, bright and quick */
.shooting-star--5 {
  top: 50%;
  left: 90%;
  width: 100px;
  background: linear-gradient(90deg, transparent, rgba(190, 210, 255, 0.3) 30%, rgba(255, 255, 255, 0.8));
  transform: rotate(210deg) translate(-120px, 0);
  animation: shoot-5 50s linear infinite;
}

@keyframes shoot-5 {
  0%, 82% { opacity: 0; transform: rotate(210deg) translate(-120px, 0); }
  83% { opacity: 0.8; transform: rotate(210deg) translate(-50px, 0); }
  87% { opacity: 0.5; }
  90% { opacity: 0; transform: rotate(210deg) translate(450px, 0); }
  100% { opacity: 0; transform: rotate(210deg) translate(450px, 0); }
}

/* Dust layer — ultra-tiny background particles */
.space-bg__stars--dust {
  color: rgba(160, 170, 200, 0.2);
  width: 0.5px;
  height: 0.5px;
}

.space-bg__stars--far {
  color: rgba(180, 200, 255, 0.4);
  box-shadow: inherit;
}

.space-bg__stars--mid {
  color: rgba(200, 210, 255, 0.6);
  width: 1.5px;
  height: 1.5px;
}

.space-bg__stars--near {
  color: rgba(240, 240, 255, 0.8);
  width: 2px;
  height: 2px;
  animation: star-twinkle-near 4s ease-in-out infinite alternate;
}

@keyframes star-twinkle-near {
  0%, 100% { opacity: 0.8; }
  50% { opacity: 1; }
}

/* Make the SVG sit above the background and vignette */
.sector-map-full .sector-map-body .sector-map-svg {
  position: relative;
  z-index: 2;
}

.sector-map-full .sector-map-body .sector-map-tooltip,
.sector-map-full .sector-map-body .sector-map-legend-overlay {
  z-index: 3;
}

/* Hover tooltip — space glass aesthetic */
.sector-map-tooltip {
  position: absolute;
  background: rgba(8, 12, 20, 0.9);
  backdrop-filter: blur(4px);
  border: 1px solid rgba(86, 212, 221, 0.3);
  box-shadow: 0 0 8px rgba(86, 212, 221, 0.1), inset 0 0 8px rgba(86, 212, 221, 0.05);
  color: var(--text-primary);
  padding: 4px 10px;
  font-size: 0.769rem;
  border-radius: 4px;
  pointer-events: none;
  white-space: nowrap;
  transform: translateX(-50%);
  z-index: 10;
}

/* Legend overlay */
.sector-map-legend-overlay {
  position: absolute;
  top: 4px;
  right: 4px;
  background: rgba(8, 12, 20, 0.9);
  backdrop-filter: blur(4px);
  border: 1px solid rgba(86, 212, 221, 0.2);
  border-radius: 4px;
  padding: 8px 12px;
  z-index: 10;
  min-width: 160px;
}

.sector-map-legend-overlay__title {
  font-size: 0.769rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: #56d4dd;
  margin-bottom: 4px;
  border-bottom: 1px solid var(--border);
  padding-bottom: 3px;
}

.sector-map-legend-overlay__items {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* === Actions Panel === */
.actions-panel {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.actions-section {
  padding-bottom: 6px;
  border-bottom: 1px solid var(--border);
}

.actions-section:last-child {
  border-bottom: none;
}

.actions-section__title {
  font-size: 0.769rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-secondary);
  margin-bottom: 6px;
}

.actions-section__buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.actions-section__inline {
  display: flex;
  gap: 4px;
  margin-top: 6px;
}

.actions-input {
  flex: 1;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  color: var(--text-primary);
  padding: 4px 8px;
  font-size: 0.846rem;
  font-family: inherit;
  border-radius: 3px;
  outline: none;
}

.actions-input:focus {
  border-color: var(--magenta);
}

.btn-action-lg {
  padding: 5px 12px;
  font-size: 0.846rem;
  font-family: 'IBM Plex Mono', monospace;
  background: var(--bg-secondary);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-radius: 3px;
  cursor: pointer;
  text-transform: uppercase;
  transition: all 0.15s;
}

.btn-action-lg:hover {
  background: var(--bg-primary);
  border-color: var(--cyan);
  color: var(--cyan);
}

/* Nav panel warp input */
.nav-warp-row {
  display: flex;
  gap: 4px;
  padding: 0 0 6px;
  margin-bottom: 4px;
  border-bottom: 1px solid var(--border);
}

.nav-warp-input {
  width: 72px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 3px;
  padding: 3px 6px;
  color: var(--text-primary);
  font-family: inherit;
  font-size: 0.846rem;
  outline: none;
}

.nav-warp-input:focus {
  border-color: var(--magenta);
}

/* Gear ship actions */
.gear-ship-actions {
  margin-bottom: 6px;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--border);
}

/* === Viewport Glow Border === */
.scene-viewport {
  box-shadow: inset 1px 0 6px rgba(86, 212, 221, 0.08), inset 0 0 12px rgba(232, 71, 160, 0.12);
  transition: box-shadow 0.6s ease;
}

.scene-viewport--combat {
  box-shadow: inset 0 0 18px rgba(240, 136, 62, 0.25), 0 0 8px rgba(240, 136, 62, 0.1);
  animation: viewport-glow-combat 1.5s ease-in-out infinite;
}

.scene-viewport--docked {
  box-shadow: inset 0 0 18px rgba(86, 212, 221, 0.2), 0 0 8px rgba(86, 212, 221, 0.08);
  animation: viewport-glow-docked 3s ease-in-out infinite;
}

.scene-viewport--danger {
  box-shadow: inset 0 0 14px rgba(248, 81, 73, 0.18), 0 0 6px rgba(248, 81, 73, 0.08);
  animation: viewport-glow-danger 2s ease-in-out infinite;
}

@keyframes viewport-glow-combat {
  0%, 100% { box-shadow: inset 0 0 18px rgba(240, 136, 62, 0.25), 0 0 8px rgba(240, 136, 62, 0.1); }
  50% { box-shadow: inset 0 0 28px rgba(240, 136, 62, 0.4), 0 0 14px rgba(240, 136, 62, 0.2); }
}

@keyframes viewport-glow-docked {
  0%, 100% { box-shadow: inset 0 0 18px rgba(86, 212, 221, 0.2), 0 0 8px rgba(86, 212, 221, 0.08); }
  50% { box-shadow: inset 0 0 24px rgba(86, 212, 221, 0.3), 0 0 12px rgba(86, 212, 221, 0.12); }
}

@keyframes viewport-glow-danger {
  0%, 100% { box-shadow: inset 0 0 14px rgba(248, 81, 73, 0.18), 0 0 6px rgba(248, 81, 73, 0.08); }
  50% { box-shadow: inset 0 0 22px rgba(248, 81, 73, 0.3), 0 0 10px rgba(248, 81, 73, 0.15); }
}

/* === Group Panel Tabs (shared by CrewGroup, GearGroup, CommsGroup) === */
.group-panel-tabs { margin-bottom: 0.5rem; font-family: 'IBM Plex Mono', monospace; font-size: 0.85rem; }

/* === Explore Panel === */
.resource-event-item { padding: 8px; margin-bottom: 8px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; }
.resource-event-item__header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
.resource-event-item__type { font-size: 0.923rem; font-weight: 500; }
.resource-event-item__type--asteroid { color: var(--cyan); }
.resource-event-item__type--derelict { color: var(--yellow); }
.resource-event-item__type--anomaly { color: var(--purple); }
.resource-event-item__type--alien_cache { color: var(--red); }
.resource-event-item__time { font-size: 0.769rem; }
.resource-event-item__nodes { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 6px; }
.resource-event-item__details { font-size: 0.846rem; color: var(--text-secondary); margin: 4px 0; }
.guardian-hp-bar { height: 8px; background: var(--bg-primary); border: 1px solid var(--border); border-radius: 4px; overflow: hidden; margin: 4px 0; }
.guardian-hp-bar__fill { height: 100%; background: var(--red); transition: width 0.3s; }

/* === Tablet Panel === */
.tablet-equip-slots { display: flex; gap: 8px; margin-bottom: 12px; }
.tablet-slot { flex: 1; padding: 8px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; text-align: center; font-size: 0.846rem; }
.tablet-slot--equipped { border-color: var(--cyan); }
.tablet-slot__label { font-size: 0.769rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }
.tablet-slot__name { color: var(--text-primary); margin: 4px 0; }
.tablet-slot__rarity { color: var(--yellow); font-size: 0.769rem; }
.tablet-checkbox-list { display: flex; flex-direction: column; gap: 4px; }
.tablet-checkbox-item { display: flex; align-items: center; gap: 6px; font-size: 0.923rem; cursor: pointer; }
.tablet-checkbox-item input { accent-color: var(--cyan); }

/* === NPC Panel === */
.npc-list-item { display: flex; align-items: center; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid var(--bg-tertiary); }
.npc-list-item__info { display: flex; align-items: center; gap: 8px; }
.npc-list-item__text { display: flex; flex-direction: column; }
.npc-list-item__name { color: var(--cyan); font-size: 0.923rem; }
.npc-list-item__title { color: var(--text-secondary); font-size: 0.769rem; }
.npc-disposition { display: inline-flex; gap: 2px; margin-top: 2px; }
.npc-disposition__dot { width: 5px; height: 5px; border-radius: 50%; background: var(--text-muted); }
.npc-disposition__dot--filled-friendly { background: var(--green); }
.npc-disposition__dot--filled-neutral { background: var(--text-secondary); }
.npc-disposition__dot--filled-hostile { background: var(--red); }
.contact-item { padding: 4px 0; border-bottom: 1px solid var(--bg-tertiary); font-size: 0.846rem; }
.contact-item__name { color: var(--cyan); }
.contact-item__detail { color: var(--text-secondary); font-size: 0.769rem; }

/* === Crafting Panel === */
.crafting-resource-list { display: flex; flex-direction: column; gap: 2px; }
.crafting-resource { display: flex; justify-content: space-between; padding: 2px 4px; font-size: 0.846rem; }
.crafting-resource--t1 { color: var(--text-secondary); }
.crafting-resource--t2 { color: var(--green); }
.crafting-resource--t3 { color: var(--blue); }
.crafting-resource--t4 { color: var(--purple); }
.crafting-resource--t5 { color: var(--orange); }
.recipe-toggle-row { display: flex; gap: 4px; margin-bottom: 8px; }
.recipe-tier-header { font-size: 0.769rem; text-transform: uppercase; letter-spacing: 0.5px; padding: 4px 0 2px; margin-top: 4px; border-bottom: 1px solid var(--border); margin-bottom: 4px; }
.recipe-item { padding: 8px; margin-bottom: 6px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; }
.recipe-item--craftable { border-color: var(--green-dim); }
.recipe-item--locked { opacity: 0.6; }
.recipe-item--undiscovered { opacity: 0.5; border-color: var(--border) !important; }
.recipe-item--undiscovered .recipe-item__name { color: var(--text-muted); font-style: italic; }
.recipe-item__header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
.recipe-item__name { font-size: 0.923rem; color: var(--text-primary); }
.recipe-item__time { font-size: 0.769rem; color: var(--text-secondary); }
.recipe-item__desc { font-size: 0.769rem; color: var(--text-secondary); margin-bottom: 4px; font-style: italic; }
.recipe-item__ingredients { display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 6px; }
.recipe-ingredient { font-size: 0.769rem; padding: 1px 5px; border-radius: 3px; background: var(--bg-primary); border: 1px solid var(--border); }
.recipe-ingredient--have { color: var(--green); border-color: var(--green-dim); }
.recipe-ingredient--need { color: var(--red); border-color: var(--red-dim, #4a1c1c); }
.recipe-ingredient--credits { color: var(--yellow); border-color: var(--yellow-dim, #4a3a1c); }
.recipe-ingredient__qty { margin-left: 3px; opacity: 0.8; }
.recipe-item__actions { display: flex; gap: 6px; align-items: center; margin-top: 4px; }
.planet-selector { background: var(--bg-primary); border: 1px solid var(--border); color: var(--text-primary); padding: 2px 6px; font-size: 0.846rem; font-family: inherit; border-radius: 3px; }
.refinery-item { display: flex; justify-content: space-between; align-items: center; padding: 4px 0; border-bottom: 1px solid var(--bg-tertiary); font-size: 0.846rem; }
.refinery-item--ready { color: var(--green); }
.refinery-item--pending { color: var(--yellow); }

/* === Context Panel Alerts === */
.context-panel__alerts { padding: 0 8px 8px; }
.alert-items { display: flex; flex-direction: column; gap: 4px; }
.alert-item { display: flex; align-items: center; gap: 6px; font-size: 0.846rem; padding: 4px 6px; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 3px; cursor: pointer; transition: border-color 0.15s; }
.alert-item:hover { border-color: var(--cyan); }
.alert-item--resource { color: var(--green); border-left: 2px solid var(--green); }
.alert-item--danger { color: var(--red); border-left: 2px solid var(--red); }
.alert-item--special { color: var(--purple); border-left: 2px solid var(--purple); }
.alert-item--npc { color: var(--cyan); border-left: 2px solid var(--cyan); }
.btn-action--harvest { color: var(--green); border-color: var(--green); }
.btn-action--salvage { color: var(--purple); border-color: var(--purple); }
.btn-action--attack { color: var(--red); border-color: var(--red); }

/* === Mall Panel === */
.mall-tabs { font-size: 0.78rem; }
.mall-tab-content { padding: 4px 0; }
.mall-tab-credits { font-size: 0.846rem; margin-bottom: 6px; }
.mall-error { color: var(--red); font-size: 0.846rem; padding: 4px 6px; background: rgba(248, 81, 73, 0.1); border-radius: 3px; border: 1px solid rgba(248, 81, 73, 0.3); margin-bottom: 6px; }
.mall-success { color: var(--green); font-size: 0.846rem; padding: 4px 6px; background: rgba(63, 185, 80, 0.1); border-radius: 3px; border: 1px solid rgba(63, 185, 80, 0.3); margin-bottom: 6px; }
.mall-item-list { display: flex; flex-direction: column; gap: 2px; }
.mall-item { display: flex; align-items: center; justify-content: space-between; padding: 4px 0; border-bottom: 1px solid var(--bg-tertiary); font-size: 0.923rem; }
.mall-item:last-child { border-bottom: none; }
.mall-item--locked { opacity: 0.5; }
.mall-item__info { display: flex; flex-direction: column; gap: 1px; flex: 1; min-width: 0; }
.mall-item__name { color: var(--text-primary); font-size: 0.923rem; }
.mall-item__category { color: var(--text-secondary); font-size: 0.769rem; text-transform: uppercase; }
.mall-item__desc { color: var(--text-secondary); font-size: 0.769rem; }
.mall-item__stats { color: var(--cyan); font-size: 0.769rem; }
.mall-item__locked { color: var(--red); font-size: 0.769rem; }
.mall-item__action { display: flex; align-items: center; gap: 6px; flex-shrink: 0; }
.mall-item__price { color: var(--purple); font-size: 0.846rem; white-space: nowrap; }
.mall-item__badge-warn { color: var(--yellow); font-size: 0.769rem; font-weight: bold; }

/* === Cantina === */
.cantina-rumor { font-size: 0.846rem; color: var(--text-secondary); font-style: italic; padding: 6px; background: var(--bg-tertiary); border-radius: 3px; margin-bottom: 8px; border-left: 2px solid var(--yellow); }
.cantina-rumor__label { color: var(--yellow); font-weight: bold; font-style: normal; }
.cantina-actions { display: flex; gap: 8px; margin-bottom: 8px; }
.cantina-action { display: flex; align-items: center; gap: 4px; }
.cantina-result { font-size: 0.846rem; padding: 6px; background: var(--bg-tertiary); border-radius: 3px; margin-top: 6px; border-left: 2px solid var(--cyan); }
.cantina-result__label { color: var(--cyan); font-weight: bold; }
.cantina-mission { margin-top: 4px; }

/* === Refuel === */
.refuel-status { margin-bottom: 8px; }
.refuel-bar-label { font-size: 0.923rem; margin-bottom: 4px; }
.refuel-controls { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; font-size: 0.923rem; color: var(--text-secondary); }
.refuel-cost { font-size: 0.846rem; margin-bottom: 4px; }

/* === Planet Actions === */
.planet-actions { display: flex; align-items: center; gap: 6px; margin-top: 4px; flex-wrap: wrap; }
.planet-colonize-group { display: inline-flex; align-items: center; gap: 4px; }
.planet-detail-expanded { margin-top: 6px; padding-top: 6px; border-top: 1px solid var(--border); }
.planet-refinery { margin-bottom: 6px; }
.planet-unique { margin-bottom: 6px; }

/* === NPC Dialogue === */
.npc-dialogue { padding: 4px 0; }
.npc-dialogue__header { margin-bottom: 8px; padding-bottom: 6px; border-bottom: 1px solid var(--border); }
.npc-dialogue__name { color: var(--cyan); font-size: 1.077rem; font-weight: 500; }
.npc-dialogue__title { color: var(--text-secondary); font-size: 0.769rem; }
.npc-dialogue__text { font-size: 0.923rem; color: var(--text-primary); line-height: 1.5; margin-bottom: 8px; white-space: pre-wrap; }
.npc-dialogue__options { display: flex; flex-direction: column; gap: 4px; }
.npc-dialogue__option { text-align: left; padding: 4px 8px; font-size: 0.846rem; font-family: 'IBM Plex Mono', monospace; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 3px; color: var(--blue); cursor: pointer; transition: all 0.15s; }
.npc-dialogue__option:hover { border-color: var(--blue); background: rgba(88, 166, 255, 0.1); }
.npc-dialogue__mission { margin-top: 6px; padding: 4px 6px; background: var(--bg-tertiary); border-radius: 3px; border-left: 2px solid var(--yellow); font-size: 0.846rem; }
.npc-vendor-list { display: flex; flex-direction: column; gap: 6px; margin-top: 8px; }
.npc-vendor-item { display: flex; justify-content: space-between; align-items: center; padding: 4px 6px; border: 1px solid var(--border); border-radius: 3px; }
.npc-vendor-item--locked { opacity: 0.5; }
.npc-vendor-item__name { color: var(--text-primary); }
.npc-vendor-item__price { color: var(--yellow); font-size: 0.846rem; }
.npc-vendor-item__fame-req { color: var(--text-muted); font-size: 0.769rem; font-style: italic; }

/* === Mission Item Actions === */
.mission-item__actions { display: flex; gap: 6px; margin-top: 4px; }
.mission-item--locked { opacity: 0.5; }

/* === Ship Upgrades === */
.upgrade-item { display: flex; align-items: center; justify-content: space-between; padding: 4px 0; border-bottom: 1px solid var(--bg-tertiary); font-size: 0.923rem; }
.upgrade-item:last-child { border-bottom: none; }
.upgrade-item__info { display: flex; align-items: center; gap: 6px; flex: 1; min-width: 0; }
.upgrade-item__name { color: var(--text-primary); }
.upgrade-item__slot { color: var(--text-secondary); font-size: 0.769rem; }
.upgrade-item__bonus { font-size: 0.769rem; }
.upgrade-item__action { display: flex; align-items: center; gap: 6px; }

/* === Mail Panel === */
.mail-content { font-size: 0.923rem; }
.mail-subtabs { margin-bottom: 6px; font-family: 'IBM Plex Mono', monospace; font-size: 0.8rem; }
.mail-list { display: flex; flex-direction: column; gap: 2px; }
.mail-list-item { padding: 4px 6px; border-bottom: 1px solid var(--bg-tertiary); cursor: pointer; transition: background 0.15s; border-radius: 2px; }
.mail-list-item:hover { background: rgba(86, 212, 221, 0.06); }
.mail-list-item--unread { border-left: 2px solid var(--cyan); }
.mail-list-item__header { display: flex; align-items: center; justify-content: space-between; }
.mail-list-item__from { color: var(--cyan); font-size: 0.846rem; }
.mail-list-item__subject { color: var(--text-primary); font-size: 0.923rem; }
.mail-list-item__date { color: var(--text-secondary); font-size: 0.769rem; }
.mail-unread-badge { background: var(--cyan); color: var(--bg-primary); font-size: 0.692rem; padding: 1px 4px; border-radius: 3px; font-weight: bold; }
.mail-message-view { padding: 4px 0; }
.mail-message-header { margin-bottom: 8px; padding-bottom: 6px; border-bottom: 1px solid var(--border); }
.mail-message-subject { color: var(--text-primary); font-size: 1rem; font-weight: 500; }
.mail-message-body { color: var(--text-primary); font-size: 0.923rem; line-height: 1.5; white-space: pre-wrap; margin-bottom: 8px; min-height: 40px; }
.mail-message-actions { display: flex; gap: 6px; }
.mail-compose { display: flex; flex-direction: column; gap: 6px; }
.mail-field { display: flex; flex-direction: column; gap: 2px; }
.mail-field label { font-size: 0.769rem; color: var(--text-secondary); text-transform: uppercase; }
.mail-input { background: var(--bg-primary); border: 1px solid var(--border); color: var(--text-primary); padding: 4px 6px; font-size: 0.923rem; font-family: inherit; border-radius: 3px; outline: none; }
.mail-input:focus { border-color: var(--cyan); }
.mail-textarea { background: var(--bg-primary); border: 1px solid var(--border); color: var(--text-primary); padding: 4px 6px; font-size: 0.923rem; font-family: inherit; border-radius: 3px; outline: none; resize: vertical; }
.mail-textarea:focus { border-color: var(--cyan); }

/* === Profile Dropdown === */
.profile-dropdown { position: absolute; top: 100%; left: 0; z-index: 50; width: 260px; max-height: 400px; overflow-y: auto; background: var(--bg-secondary); border: 1px solid var(--border-bright); border-radius: 6px; padding: 12px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5); }
.profile-dropdown__header { margin-bottom: 8px; padding-bottom: 6px; border-bottom: 1px solid var(--border); }
.profile-dropdown__name { color: var(--magenta); font-size: 1.077rem; font-weight: 700; }
.profile-dropdown__rank { color: var(--yellow); font-size: 0.846rem; text-transform: uppercase; letter-spacing: 1px; }
.profile-dropdown__stats { display: flex; gap: 12px; margin-bottom: 8px; }
.profile-stat { display: flex; flex-direction: column; }
.profile-stat__label { font-size: 0.692rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }
.profile-stat__value { font-size: 0.923rem; color: var(--text-primary); }
.profile-xp { margin-bottom: 8px; }
.profile-xp__label { font-size: 0.769rem; color: var(--text-secondary); margin-bottom: 3px; }
.profile-bonuses { font-size: 0.769rem; margin-bottom: 8px; }
.profile-bonuses__label { color: var(--text-secondary); }
.profile-bonus { display: inline-block; margin: 2px 4px; padding: 1px 4px; background: var(--bg-tertiary); border-radius: 2px; color: var(--yellow); font-size: 0.769rem; }
.profile-achievements { margin-top: 4px; }
.profile-achievement { padding: 2px 0; font-size: 0.846rem; }
.profile-achievement__name { color: var(--text-primary); }
.status-value--clickable { cursor: pointer; transition: color 0.15s; }
.status-value--clickable:hover { color: var(--magenta); }

/* === Responsive: small screens === */
@media (max-height: 768px) {
  .sector-map-svg {
    height: min(220px, 25vh);
  }

  .status-bar {
    gap: 10px;
    padding: 4px 12px;
  }

  .status-label {
    font-size: 0.692rem;
  }

  .status-value {
    font-size: 0.923rem;
  }
}

@media (max-height: 600px) {
  .sector-map-svg {
    height: min(160px, 22vh);
  }

  .panel-header {
    padding: 4px 10px;
    font-size: 0.769rem;
  }
}

@media (max-width: 768px) {
  .game-main { flex-direction: column; }
  .activity-bar { flex-direction: row; width: 100%; height: 40px; border-right: none; border-bottom: 1px solid var(--border); overflow-x: auto; }
  .activity-bar__btn { width: 32px; height: 32px; }
  .activity-bar__tooltip { display: none; }
  .activity-bar__sep { width: 1px; height: 24px; margin: 0 2px; }
  .context-panel { width: 100%; height: auto; max-height: 30vh; border-left: none; border-top: 1px solid var(--border); flex-direction: row; flex-wrap: wrap; }
  .notification-bar__lines { max-height: 3em; }
  .notification-bar--expanded .notification-bar__lines { max-height: 30vh; }
  .game-panel-area { flex-direction: column; }
  .scene-viewport { max-height: 150px; border-left: none; border-bottom: 1px solid var(--border); }
}

/* === Syndicate & Alliance System === */

/* Syndicate create form */
.syndicate-create-form {
  padding: 4px 0;
}

/* Browse results */
.syndicate-browse {
  max-height: 200px;
  overflow-y: auto;
}

.syndicate-browse-item {
  padding: 4px 6px;
  margin-bottom: 4px;
  border: 1px solid var(--border);
  background: var(--bg-primary);
  border-radius: 2px;
}

.syndicate-browse-item:hover {
  border-color: var(--text-muted);
}

/* Recruitment badges */
.badge-recruitment {
  font-size: 0.615rem;
  padding: 1px 4px;
  border-radius: 2px;
  text-transform: uppercase;
  font-weight: bold;
  letter-spacing: 0.5px;
}

.badge-open { background: #1a3a2a; color: var(--green); }
.badge-closed { background: #3a2a1a; color: var(--yellow); }
.badge-invite_only { background: #2a1a3a; color: var(--purple); }

/* Vote cards */
.vote-card {
  padding: 6px;
  margin-bottom: 6px;
  border: 1px solid #222;
  background: #0a0a0a;
  border-radius: 2px;
}

.vote-progress {
  margin-top: 4px;
}

.vote-progress__bar {
  display: flex;
  height: 6px;
  background: #1a1a1a;
  border-radius: 2px;
  overflow: hidden;
  margin-bottom: 2px;
}

.vote-bar-yes { background: var(--green); }
.vote-bar-no { background: var(--red); }
.vote-bar-abstain { background: #555; }

.vote-buttons button {
  flex: 1;
}

/* Admin panel */
.admin-section {
  padding: 4px 0;
}

.permission-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 4px 12px;
  padding: 2px 0;
}

.permission-grid input[type="checkbox"] {
  accent-color: var(--cyan);
}

/* Invite codes */
.invite-code-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 3px 0;
  border-bottom: 1px solid #1a1a1a;
}

.code-copy {
  font-family: 'IBM Plex Mono', monospace;
  font-size: 0.923rem;
  color: var(--cyan);
  cursor: pointer;
  padding: 1px 4px;
  background: #1a2a2a;
  border-radius: 2px;
  letter-spacing: 1px;
}

.code-copy:hover {
  background: #2a3a3a;
}

/* Join request items */
.join-request-item {
  padding: 4px 0;
  border-bottom: 1px solid #1a1a1a;
}

/* Chat channel selector */
.chat-channel-selector {
  padding: 4px 0;
  margin-bottom: 4px;
  border-bottom: 1px solid #1a1a1a;
}

.channel-active {
  font-weight: bold;
}

/* Ally button */
.btn-ally {
  background: #1a2a2a;
  color: #666;
  border: 1px solid #333;
  font-size: 0.692rem;
  padding: 1px 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.btn-ally:hover {
  border-color: var(--cyan);
  color: var(--cyan);
}

.btn-ally--active {
  background: #1a3a2a;
  color: var(--green);
  border-color: var(--green);
}

.btn-ally--active:hover {
  background: #2a1a1a;
  color: var(--red);
  border-color: var(--red);
}

/* Faction Reputation */
.faction-rep-section {
  padding: 6px 0;
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
}

.faction-rep-header {
  font-size: 0.692rem;
  color: var(--text-secondary);
  letter-spacing: 1px;
  margin-bottom: 4px;
}

.faction-rep-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1px 0;
  font-size: 0.769rem;
}

.faction-rep-name {
  color: var(--text-secondary);
}

.faction-rep-tier {
  font-size: 0.692rem;
  font-weight: bold;
  letter-spacing: 0.5px;
}

/* === Upscaling for larger monitors === */
@media (min-width: 2560px) {
  .context-panel { width: 340px; }
  .activity-bar { width: 52px; }
  .activity-bar__btn { width: 42px; height: 42px; }
}

@media (min-width: 3840px) {
  .context-panel { width: 400px; }
  .activity-bar { width: 60px; }
  .activity-bar__btn { width: 48px; height: 48px; }
}

/* Notes section in context panel */
.ctx-notes-section {
  border-bottom: 1px solid var(--border);
  max-height: 150px;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--border) var(--bg-primary);
  padding: 0 0 4px;
}
